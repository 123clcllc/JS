[[JavaScript]]

Существует ещё один синтаксис создания функций, который называется _Function Expression_ (Функциональное Выражение).

Данный синтаксис позволяет нам создавать новую функцию в середине любого выражения.

let sayHi = function() {
    alert('Привет');
}

Здесь мы можем видеть переменную `sayHi`, получающую значение, новую функцию, созданную как `function() { alert("Привет"); }`.

Поскольку создание функции происходит в контексте выражения присваивания (с правой стороны от `=`), это _Function Expression_.

Обратите внимание, что после ключевого слова `function` нет имени. Для Function Expression допускается его отсутствие.

Здесь мы сразу присваиваем её переменной, так что смысл этих примеров кода один и тот же: "создать функцию и поместить её в переменную `sayHi`".

В более сложных ситуациях, с которыми мы столкнёмся позже, функция может быть создана и немедленно вызвана, или запланирована для дальнейшего выполнения, нигде не сохраняясь, таким образом, оставаясь анонимной.

## [ункции-«колбэки»](https://learn.javascript.ru/function-expressions#funktsii-kolbeki)

Давайте рассмотрим больше примеров передачи функции в виде значения и использования функциональных выражений.

Давайте напишем функцию `ask(question, yes, no)` с тремя параметрами:
`question`
Текст вопроса
`yes`
Функция, которая будет вызываться, если ответ будет «Yes»
`no`
Функция, которая будет вызываться, если ответ будет «No»
Наша функция должна задать вопрос `question` и, в зависимости от того, как ответит пользователь, вызвать `yes()` или `no()`:

function ask(question, yes, no) {
    if  (confirm(question)) yes()
    else no();
}
function showOk {
    alert('Вы согласны.');
}
function showCancel() {
    alert('Вы отменили выполнение.');
}
// использование: функции showOk, showCancel передаются  в качестве аргументов  ask
ask('Вы согласны?', showOk, showCancel);

На практике подобные функции очень полезны. Основное отличие «реальной» функции `ask` от примера выше будет в том, что она использует более сложные способы взаимодействия с пользователем, чем простой вызов `confirm`. В браузерах такие функции обычно отображают красивые диалоговые окна. Но это уже другая история.

**Аргументы `showOk` и `showCancel` функции `ask` называются _функциями-колбэками_ или просто _колбэками_.**

Ключевая идея в том, что мы передаём функцию и ожидаем, что она вызовется обратно (от англ. «call back» – обратный вызов) когда-нибудь позже, если это будет необходимо. В нашем случае, `showOk` становится _колбэком_ для ответа «yes», а `showCancel` – для ответа «no».

Мы можем переписать этот пример значительно короче, используя Function Expression:

function ask(question, yes, no) {
    if (confirm(qustion)) yes()
    else no;
}
ask(
    'Вы согласны?',
    function() {alert('Вы согласились.'); },
    function() {alert('Вы оменили выполнение.'); }
);
Здесь функции объявляются прямо внутри вызова `ask(...)`. У них нет имён, поэтому они называются _анонимными_. Такие функции недоступны снаружи `ask` (потому что они не присвоены переменным), но это как раз то, что нам нужно.

## [Function Expression в сравнении с Function Declaration](https://learn.javascript.ru/function-expressions#function-expression-v-sravnenii-s-function-declaration)

Давайте разберём ключевые отличия Function Declaration от Function Expression.

Во-первых, синтаксис: как отличить их друг от друга в коде.

**Function Expression создаётся, когда выполнение доходит до него, и затем уже может использоваться.**

После того, как поток выполнения достигнет правой части выражения присваивания `let sum = function…` – с этого момента, функция считается созданной и может быть использована (присвоена переменной, вызвана и т.д. ).

С Function Declaration всё иначе.

**Function Declaration может быть вызвана раньше, чем она объявлена.**

Другими словами, когда движок JavaScript _готовится_ выполнять скрипт или блок кода, прежде всего он ищет в нём Function Declaration и создаёт все такие функции. Можно считать этот процесс «стадией инициализации».

И только после того, как все объявления Function Declaration будут обработаны, продолжится выполнение.

В результате функции, созданные как Function Declaration, могут быть вызваны раньше своих определений.

## [Итого](https://learn.javascript.ru/function-expressions#itogo)

- Функции – это значения. Они могут быть присвоены, скопированы или объявлены в любом месте кода.
- Если функция объявлена как отдельная инструкция в основном потоке кода, то это “Function Declaration”.
- Если функция была создана как часть выражения, то это “Function Expression”.
- Function Declaration обрабатываются перед выполнением блока кода. Они видны во всём блоке.
- Функции, объявленные при помощи Function Expression, создаются только когда поток выполнения достигает их.

В большинстве случаев, когда нам нужно объявить функцию, Function Declaration предпочтительнее, т.к функция будет видна до своего объявления в коде. Это даёт нам больше гибкости в организации кода, и, как правило, делает его более читабельным.

Исходя из этого, мы должны использовать Function Expression только тогда, когда Function Declaration не подходит для нашей задачи. Мы рассмотрели несколько таких примеров в этой главе, и увидим ещё больше в будущем.